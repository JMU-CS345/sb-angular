{"ast":null,"code":"import { Component, QueryList } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DataService } from '../data.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../data.service\";\nconst _c0 = [\"sprintView\"];\nconst _c1 = [\"*\"];\nexport let SprintLoaderComponent = /*#__PURE__*/(() => {\n  class SprintLoaderComponent {\n    constructor(dataService) {\n      this.dataService = dataService;\n    }\n\n    ngOnInit() {}\n\n    ngAfterViewInit() {\n      this.updateData(this.sprintId);\n    }\n\n    updateData(id) {\n      if (id == 0) {\n        return;\n      }\n\n      this.dataService.load(`sprints/${id}`, [`sprints/${id}`]);\n      this.sub = this.dataService.values[`sprints/${id}`].subscribe(x => {\n        if (x == null) return;\n\n        if (this.components) {\n          this.components.toArray().forEach(component => {\n            component[\"sprint\"] = x;\n          });\n        }\n      });\n    }\n\n    unloadData(id) {\n      if (id == 0) {\n        return;\n      }\n\n      this.dataService.unload(`sprints/${id}`, [`sprints/${id}`]);\n      this.sub.unsubscribe();\n    }\n\n    set sprintId(value) {\n      if (this._sprintId) {\n        this.unloadData(this._sprintId);\n      }\n\n      this._sprintId = value;\n\n      if (this._sprintId) {\n        this.updateData(this._sprintId);\n      }\n    }\n\n    get sprintId() {\n      return this._sprintId;\n    }\n\n    ngOnDestroy() {\n      this.unloadData(this._sprintId);\n    }\n\n  }\n\n  SprintLoaderComponent.ɵfac = function SprintLoaderComponent_Factory(t) {\n    return new (t || SprintLoaderComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n  };\n\n  SprintLoaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SprintLoaderComponent,\n    selectors: [[\"sb-sprint-loader\"]],\n    contentQueries: function SprintLoaderComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        i0.ɵɵcontentQuery(dirIndex, _c0, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.components = _t);\n      }\n    },\n    inputs: {\n      sprintId: \"sprintId\"\n    },\n    ngContentSelectors: _c1,\n    decls: 1,\n    vars: 0,\n    template: function SprintLoaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵprojection(0);\n      }\n    }\n  });\n  return SprintLoaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}