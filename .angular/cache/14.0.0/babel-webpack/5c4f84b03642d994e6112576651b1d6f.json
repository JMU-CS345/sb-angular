{"ast":null,"code":"import { EventEmitter, ElementRef } from '@angular/core';\nimport { Base } from '../base';\nimport { Color } from '../color';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { callWithSnackBar } from '../util';\nimport { EditTaskDialogComponent } from '../edit-task-dialog/edit-task-dialog.component';\nimport { TasksService } from '../tasks.service';\nimport { DataService } from '../data.service';\nimport { IssuesService } from '../issues.service';\nimport { EpicsService } from '../epics.service';\nimport { SprintsService } from '../sprints.service';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"../tasks.service\";\nimport * as i4 from \"../data.service\";\nimport * as i5 from \"../issues.service\";\nimport * as i6 from \"../epics.service\";\nimport * as i7 from \"@angular/router\";\nimport * as i8 from \"../sprints.service\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/material/card\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"@angular/material/form-field\";\nimport * as i14 from \"@angular/material/tooltip\";\nimport * as i15 from \"@angular/material/select\";\nimport * as i16 from \"@angular/material/core\";\nimport * as i17 from \"@angular/material/progress-spinner\";\nimport * as i18 from \"../tasks/tasks.component\";\nimport * as i19 from \"../comment-display/comment-display.component\";\nimport * as i20 from \"../comment-entry/comment-entry.component\";\nimport * as i21 from \"../acceptance-criterion-entry/acceptance-criterion-entry.component\";\nconst _c0 = [\"newCriterion\"];\nconst _c1 = [\"epicSelector\"];\n\nfunction IssueDetailComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nconst _c2 = function (a0, a1) {\n  return {\n    \"col-4\": a0,\n    \"col-2\": a1\n  };\n};\n\nfunction IssueDetailComponent_div_3_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 27);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c2, ctx_r3.issue.closable, !ctx_r3.issue.closable));\n  }\n}\n\nconst _c3 = function (a0, a1) {\n  return {\n    \"background-color\": a0,\n    \"color\": a1\n  };\n};\n\nfunction IssueDetailComponent_div_3_mat_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const epic_r13 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", epic_r13.id)(\"ngStyle\", i0.ɵɵpureFunction2(3, _c3, epic_r13.color ? epic_r13.color : \"#FFFFFF\", ctx_r5.fontColor(epic_r13.color)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", epic_r13.title, \" \");\n  }\n}\n\nfunction IssueDetailComponent_div_3_mat_option_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sprint_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", sprint_r14.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", sprint_r14.title, \" \");\n  }\n}\n\nfunction IssueDetailComponent_div_3_mat_card_29_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 32)(2, \"sb-acceptance-criterion-entry\", 33);\n    i0.ɵɵlistener(\"deleteAC\", function IssueDetailComponent_div_3_mat_card_29_div_4_Template_sb_acceptance_criterion_entry_deleteAC_2_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r18.deleteAC($event));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const criterion_r17 = ctx.$implicit;\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"criterion\", criterion_r17)(\"issue\", ctx_r15.issue)(\"showCompletionCheckboxes\", ctx_r15.showCompletionCheckboxes)(\"editable\", ctx_r15.editable && ctx_r15.issue.state != \"Closed\");\n  }\n}\n\nfunction IssueDetailComponent_div_3_mat_card_29_div_5_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function IssueDetailComponent_div_3_mat_card_29_div_5_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      i0.ɵɵnextContext();\n\n      const _r21 = i0.ɵɵreference(4);\n\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r22.createAC(_r21.value));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 39);\n    i0.ɵɵtext(2, \"add_circle\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r21 = i0.ɵɵreference(4);\n\n    i0.ɵɵproperty(\"disabled\", _r21.value.trim() == \"\");\n  }\n}\n\nfunction IssueDetailComponent_div_3_mat_card_29_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 34);\n    i0.ɵɵtemplate(2, IssueDetailComponent_div_3_mat_card_29_div_5_button_2_Template, 3, 1, \"button\", 35);\n    i0.ɵɵelement(3, \"textarea\", 36, 37);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r16.permission(ctx_r16.issue, \"update\"));\n  }\n}\n\nfunction IssueDetailComponent_div_3_mat_card_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 29)(1, \"div\", 8);\n    i0.ɵɵtext(2, \"Acceptance Criteria\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtemplate(4, IssueDetailComponent_div_3_mat_card_29_div_4_Template, 3, 4, \"div\", 30);\n    i0.ɵɵtemplate(5, IssueDetailComponent_div_3_mat_card_29_div_5_Template, 5, 1, \"div\", 31);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.issue.acceptance_criteria);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.editable && ctx_r7.permission(ctx_r7.issue, \"update\") && ctx_r7.issue.state != \"Closed\");\n  }\n}\n\nfunction IssueDetailComponent_div_3_button_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function IssueDetailComponent_div_3_button_32_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.createTask());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 41);\n    i0.ɵɵtext(2, \"add_circle\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction IssueDetailComponent_div_3_ng_template_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 42);\n    i0.ɵɵtext(1, \"No Tasks\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction IssueDetailComponent_div_3_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-tasks\", 43);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"editable\", ctx_r11.issue.state != \"Closed\")(\"issue\", ctx_r11.issue);\n  }\n}\n\nfunction IssueDetailComponent_div_3_sb_comment_display_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"sb-comment-display\", 44);\n  }\n\n  if (rf & 2) {\n    const comment_r26 = ctx.$implicit;\n    i0.ɵɵproperty(\"comment\", comment_r26);\n  }\n}\n\nconst _c4 = function (a0, a1) {\n  return {\n    \"col-8\": a0,\n    \"col-10\": a1\n  };\n};\n\nconst _c5 = function (a0) {\n  return {\n    \"background-color\": a0\n  };\n};\n\nfunction IssueDetailComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 2)(2, \"div\", 3)(3, \"span\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 5);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, IssueDetailComponent_div_3_div_7_Template, 1, 4, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"p\", 7);\n    i0.ɵɵelementStart(9, \"div\", 8);\n    i0.ɵɵtext(10, \"Epic \");\n    i0.ɵɵelementStart(11, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function IssueDetailComponent_div_3_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.jumpToEpic());\n    });\n    i0.ɵɵelement(12, \"mat-icon\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", null, 11)(15, \"mat-form-field\", 12)(16, \"mat-select\", 13);\n    i0.ɵɵlistener(\"valueChange\", function IssueDetailComponent_div_3_Template_mat_select_valueChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.epicId = $event);\n    })(\"selectionChange\", function IssueDetailComponent_div_3_Template_mat_select_selectionChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.onChangeSelection($event));\n    });\n    i0.ɵɵelementStart(17, \"mat-option\", 14);\n    i0.ɵɵtext(18, \"No Epic\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, IssueDetailComponent_div_3_mat_option_19_Template, 2, 6, \"mat-option\", 15);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 16);\n    i0.ɵɵtext(21, \"Sprint \");\n    i0.ɵɵelementStart(22, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function IssueDetailComponent_div_3_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.jumpToSprint());\n    });\n    i0.ɵɵelement(23, \"mat-icon\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"mat-form-field\", 12)(25, \"mat-select\", 17);\n    i0.ɵɵlistener(\"valueChange\", function IssueDetailComponent_div_3_Template_mat_select_valueChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.sprintId = $event);\n    })(\"selectionChange\", function IssueDetailComponent_div_3_Template_mat_select_selectionChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.onChangeSprintSelection($event));\n    });\n    i0.ɵɵelementStart(26, \"mat-option\", 14);\n    i0.ɵɵtext(27, \"No Sprint\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(28, IssueDetailComponent_div_3_mat_option_28_Template, 2, 2, \"mat-option\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(29, IssueDetailComponent_div_3_mat_card_29_Template, 6, 2, \"mat-card\", 19);\n    i0.ɵɵelementStart(30, \"div\", 20);\n    i0.ɵɵtext(31, \"Tasks \");\n    i0.ɵɵtemplate(32, IssueDetailComponent_div_3_button_32_Template, 3, 0, \"button\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(33, IssueDetailComponent_div_3_ng_template_33_Template, 2, 0, \"ng-template\", null, 22, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(35, IssueDetailComponent_div_3_div_35_Template, 2, 2, \"div\", 1);\n    i0.ɵɵelementStart(36, \"div\", 23)(37, \"div\", 8);\n    i0.ɵɵtext(38, \"Comments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"div\", 24);\n    i0.ɵɵtemplate(40, IssueDetailComponent_div_3_sb_comment_display_40_Template, 1, 1, \"sb-comment-display\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(41, \"sb-comment-entry\", 26);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const _r9 = i0.ɵɵreference(34);\n\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(23, _c3, ctx_r2.adaptiveBackgroundColor(ctx_r2.issue.epic == null ? null : ctx_r2.issue.epic.color), ctx_r2.adaptiveFontColor(ctx_r2.issue.epic == null ? null : ctx_r2.issue.epic.color)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(26, _c4, ctx_r2.issue.closable, !ctx_r2.issue.closable));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"#\", ctx_r2.issue.id, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.issue.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.issue.state != \"Closed\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r2.issue.description, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matTooltip\", ctx_r2.issue.epic ? \"Jump to Epic\" : \"Jump to Epics List\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.issue.state == \"Closed\" || (ctx_r2.issue.sprint == null ? null : ctx_r2.issue.sprint.completed))(\"value\", ctx_r2.epicId)(\"ngStyle\", i0.ɵɵpureFunction1(29, _c5, (ctx_r2.issue.epic == null ? null : ctx_r2.issue.epic.color) ? ctx_r2.issue.epic == null ? null : ctx_r2.issue.epic.color : \"white\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", -1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.epics);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matTooltip\", ctx_r2.issue.sprint ? \"Jump to Sprint\" : \"Jump to Sprints List\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.issue.state == \"Closed\" || (ctx_r2.issue.sprint == null ? null : ctx_r2.issue.sprint.completed))(\"value\", ctx_r2.sprintId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", -1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.sprints);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showAcceptanceCriteria);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.editable && ctx_r2.permission(ctx_r2.issue, \"create-task\") && ctx_r2.issue.state != \"Closed\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.issue.tasks && ctx_r2.issue.tasks.length > 0)(\"ngIfElse\", _r9);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.issue.comments);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"issueId\", ctx_r2.issue.id);\n  }\n}\n\nexport let IssueDetailComponent = /*#__PURE__*/(() => {\n  class IssueDetailComponent extends Base {\n    constructor(dialog, snackBar, tasksService, dataService, issuesService, epicsService, router, sprintsService) {\n      super();\n      this.dialog = dialog;\n      this.snackBar = snackBar;\n      this.tasksService = tasksService;\n      this.dataService = dataService;\n      this.issuesService = issuesService;\n      this.epicsService = epicsService;\n      this.router = router;\n      this.sprintsService = sprintsService;\n      this.editable = true;\n      this.editIssue = new EventEmitter();\n      this.completeIssue = new EventEmitter();\n      this.epicId = -1;\n      this.sprintId = -1;\n    }\n\n    ngOnInit() {}\n\n    updateTeam() {\n      this.dataService.load(`projects/${this.issue.project.id}/team`, []);\n      this.team = this.dataService.values[`projects/${this.issue.project.id}/team`];\n    }\n\n    ngAfterViewInit() {\n      this.updateSelectorStyle();\n    }\n\n    updateSelectorStyle() {\n      var _a;\n\n      if (this.issue && this.epicSelector) {\n        this.epicSelector.nativeElement.style.setProperty('--mat-select-value-text-color', this.fontColor((_a = this.issue.epic) === null || _a === void 0 ? void 0 : _a.color));\n      }\n    }\n\n    set epics(value) {\n      this._epics = value;\n    }\n\n    get epics() {\n      return this._epics;\n    }\n\n    ngOnDestroy() {\n      this.dataService.unload(`projects/${this.issue.project.id}/team`, []);\n    }\n\n    set issue(value) {\n      var _a, _b;\n\n      this._issue = value;\n      this.epicId = ((_a = value.epic) === null || _a === void 0 ? void 0 : _a.id) || -1;\n      this.sprintId = ((_b = value.sprint) === null || _b === void 0 ? void 0 : _b.id) || -1;\n\n      if (value != null) {\n        this.updateTeam();\n      } else {\n        this.team = null;\n      }\n\n      this.updateSelectorStyle();\n    }\n\n    get issue() {\n      return this._issue;\n    }\n\n    fontColor(bgColor) {\n      return Color.fontColor(bgColor);\n    }\n\n    adaptiveFontColor(color) {\n      if (!color) {\n        return 'var(--on-background)';\n      }\n\n      let fc = Color.fontColor(color);\n\n      if (fc == '#FFFFFF') {\n        return color;\n      }\n\n      return fc;\n    }\n\n    adaptiveBackgroundColor(color) {\n      if (!color) {\n        return 'var(--background)';\n      }\n\n      let fc = Color.fontColor(color);\n\n      if (fc == '#FFFFFF') {\n        return fc;\n      }\n\n      return color;\n    }\n\n    assignIssue(user) {\n      callWithSnackBar(this.snackBar, this.issuesService.assignIssue(this.issue.id, user === null || user === void 0 ? void 0 : user.id), [\"Assigning issue...\", \"Assigned issue\", \"Error assigning issue\"]);\n    }\n\n    createTask() {\n      console.log(\"CREATETASK\");\n      let data = {\n        id: -1,\n        title: '',\n        description: '',\n        estimate: 0,\n        issue: {\n          id: this.issue.id\n        }\n      };\n      const dialogRef = this.dialog.open(EditTaskDialogComponent, {\n        width: '90%',\n        data: data,\n        disableClose: true\n      });\n      dialogRef.componentInstance.newTaskMode = true;\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.create(data);\n        }\n      });\n    }\n\n    onEditIssue() {\n      this.editIssue.emit(this.issue);\n    }\n\n    onComplete() {\n      this.completeIssue.emit(this.issue);\n    }\n\n    createAC(criterion) {\n      console.log(\"create criterion\" + criterion);\n      callWithSnackBar(this.snackBar, this.issuesService.createAcceptanceCriterion(this.issue.id, criterion), ['Creating acceptance criterion...', 'Acceptance criterion created', 'Error creating acceptance criterion']);\n      this.newCriterion.nativeElement.value = '';\n      this.newCriterion.nativeElement.blur();\n    }\n\n    deleteAC(criterion) {\n      callWithSnackBar(this.snackBar, this.issuesService.deleteAcceptanceCriterion(this.issue.id, criterion.id), ['Deleting acceptance criterion...', 'Acceptance criterion deleted', 'Error deleting acceptance criterion']);\n    }\n\n    create(task) {\n      callWithSnackBar(this.snackBar, this.tasksService.createTask(task), ['Creating task...', 'Created task', 'Error creating task']);\n    }\n\n    onChangeSelection(event) {\n      if (event.value == -1) {\n        callWithSnackBar(this.snackBar, this.epicsService.removeIssue(this.issue.epic, this.issue), ['Removing issue from epic', 'Removed issue from epic', 'Error removing issue from epic']);\n      }\n\n      if (event.value != -1) {\n        callWithSnackBar(this.snackBar, this.epicsService.addIssue(this.epicId, this.issue), ['Adding issue to epic', 'Added issue to epic', 'Error adding issue to epic']);\n      }\n    }\n\n    onChangeSprintSelection(event) {\n      if (event.value == -1) {\n        callWithSnackBar(this.snackBar, this.sprintsService.removeIssue(this.issue.sprint, this.issue), ['Removing issue from sprint', 'Removed issue from sprint', 'Error removing issue from sprint']);\n      }\n\n      if (event.value != -1) {\n        callWithSnackBar(this.snackBar, this.sprintsService.addIssue(this.sprintId, this.issue), ['Adding issue to sprint', 'Added issue to sprint', 'Error adding issue to sprint']);\n      }\n    }\n\n    jumpToEpic() {\n      if (this.issue.epic) {\n        this.router.navigate(['projects', this.issue.project.id, 'epics', this.issue.epic.id]);\n      } else {\n        this.router.navigate(['projects', this.issue.project.id, 'epics']);\n      }\n    }\n\n    jumpToSprint() {\n      if (this.issue.sprint) {\n        this.router.navigate(['projects', this.issue.project.id, 'planning', this.issue.sprint.id]);\n      } else {\n        this.router.navigate(['projects', this.issue.project.id, 'planning']);\n      }\n    }\n\n  }\n\n  IssueDetailComponent.ɵfac = function IssueDetailComponent_Factory(t) {\n    return new (t || IssueDetailComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.TasksService), i0.ɵɵdirectiveInject(i4.DataService), i0.ɵɵdirectiveInject(i5.IssuesService), i0.ɵɵdirectiveInject(i6.EpicsService), i0.ɵɵdirectiveInject(i7.Router), i0.ɵɵdirectiveInject(i8.SprintsService));\n  };\n\n  IssueDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: IssueDetailComponent,\n    selectors: [[\"app-issue-detail\"]],\n    viewQuery: function IssueDetailComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.newCriterion = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.epicSelector = _t.first);\n      }\n    },\n    inputs: {\n      showAcceptanceCriteria: \"showAcceptanceCriteria\",\n      showCompletionCheckboxes: \"showCompletionCheckboxes\",\n      editable: \"editable\",\n      sprints: \"sprints\",\n      epics: \"epics\",\n      issue: \"issue\"\n    },\n    outputs: {\n      editIssue: \"editIssue\",\n      completeIssue: \"completeIssue\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 4,\n    vars: 2,\n    consts: [[\"progressSpinner\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [1, \"row\", 3, \"ngStyle\"], [1, \"banner-text\", \"p-2\", \"issue-banner\", 3, \"ngClass\"], [1, \"issue-number\"], [1, \"issue-title\"], [\"class\", \"p-2\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"issue-description\", \"p-2\", 3, \"innerHtml\"], [1, \"menu-text\"], [\"mat-icon-button\", \"\", \"type\", \"button\", 3, \"matTooltip\", \"click\"], [\"fontSet\", \"fas\", \"fontIcon\", \"fa-eye\"], [\"epicSelector\", \"\"], [1, \"form-field\"], [1, \"epic-selector\", \"mat-color-font\", \"base-text\", 3, \"disabled\", \"value\", \"ngStyle\", \"valueChange\", \"selectionChange\"], [3, \"value\"], [3, \"value\", \"ngStyle\", 4, \"ngFor\", \"ngForOf\"], [1, \"menu-text\", \"mt-2\"], [1, \"sprint-selector\", \"base-text\", 3, \"disabled\", \"value\", \"valueChange\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"mt-4 issue-card\", 4, \"ngIf\"], [1, \"mt-4\", \"menu-text\"], [\"style\", \"position: relative; top: -4px\", \"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"New Task\", 3, \"click\", 4, \"ngIf\"], [\"notasks\", \"\"], [1, \"mt-3\"], [1, \"comments-display-box\", \"mb-1\"], [3, \"comment\", 4, \"ngFor\", \"ngForOf\"], [3, \"issueId\"], [1, \"p-2\", 3, \"ngClass\"], [3, \"value\", \"ngStyle\"], [1, \"mt-4\", \"issue-card\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"mb-2\"], [3, \"criterion\", \"issue\", \"showCompletionCheckboxes\", \"editable\", \"deleteAC\"], [1, \"row\", \"add-ac-wrapper\"], [\"class\", \"col-1\", \"mat-icon-button\", \"\", \"matTooltip\", \"New Acceptance Criterion\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [1, \"col-10\", \"user-text\", \"issue-card\"], [\"newCriterion\", \"\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"New Acceptance Criterion\", 1, \"col-1\", 3, \"disabled\", \"click\"], [1, \"add-ac\", \"sb-icon\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"New Task\", 2, \"position\", \"relative\", \"top\", \"-4px\", 3, \"click\"], [1, \"sb-icon\"], [1, \"base-text\"], [3, \"editable\", \"issue\"], [3, \"comment\"]],\n    template: function IssueDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, IssueDetailComponent_ng_template_0_Template, 1, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵtemplate(3, IssueDetailComponent_div_3_Template, 42, 31, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(1);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.issue)(\"ngIfElse\", _r0);\n      }\n    },\n    dependencies: [i9.NgClass, i9.NgForOf, i9.NgIf, i9.NgStyle, i10.MatCard, i11.MatIcon, i12.MatButton, i13.MatFormField, i14.MatTooltip, i15.MatSelect, i16.MatOption, i17.MatSpinner, i18.TasksComponent, i19.CommentDisplayComponent, i20.CommentEntryComponent, i21.AcceptanceCriterionEntryComponent],\n    styles: [\".issue-card[_ngcontent-%COMP%]{background-color:var(--background);color:var(--on-background);border-color:var(--on-background);border-radius:1px}.issue-description[_ngcontent-%COMP%]{background-color:var(--background);color:var(--on-background);font-family:var(--text-font)}.epic-card[_ngcontent-%COMP%]{font-size:small;background:var(--background);border:2px solid var(--card-shadow);border-radius:1px;padding:3px 3px 3px 6px;margin-top:1px}.issue-number[_ngcontent-%COMP%]{font-size:x-small;vertical-align:middle}.issue-title[_ngcontent-%COMP%]{font-size:x-large;vertical-align:middle}.add-ac[_ngcontent-%COMP%]{font-size:13pt}.add-ac-wrapper[_ngcontent-%COMP%]{align-items:center}.comments-display-box[_ngcontent-%COMP%]{background-color:var(--background);border:1px solid var(--on-background)}.epic-selector[_ngcontent-%COMP%], .sprint-selector[_ngcontent-%COMP%]{padding:5px;border-radius:1px;border:2px solid black;box-shadow:2px 2px var(--card-shadow)}.epic-select.mat-selected[_ngcontent-%COMP%]{opacity:85%}.form-field[_ngcontent-%COMP%]{width:100%}\"]\n  });\n  return IssueDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}