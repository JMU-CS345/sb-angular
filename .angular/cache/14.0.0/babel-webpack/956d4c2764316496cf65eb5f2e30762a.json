{"ast":null,"code":"import { Base } from '../base';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ProjectService } from '../project.service';\nimport { InputDialogComponent } from '../input-dialog/input-dialog.component';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { callWithSnackBar } from '../util';\nimport { ConfirmDialogComponent } from '../confirm-dialog/confirm-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"../project.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/tooltip\";\nimport * as i10 from \"@angular/material/progress-spinner\";\nimport * as i11 from \"../project-card/project-card.component\";\nimport * as i12 from \"../burndown/burndown.component\";\nimport * as i13 from \"../project-frame/project-frame.component\";\nimport * as i14 from \"../project-activity-list/project-activity-list.component\";\n\nfunction DashboardContentComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nfunction DashboardContentComponent_app_project_frame_2_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function DashboardContentComponent_app_project_frame_2_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.addMember());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 14);\n    i0.ɵɵtext(2, \"add_circle\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction DashboardContentComponent_app_project_frame_2_div_22_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DashboardContentComponent_app_project_frame_2_div_22_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const user_r10 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.removeMember(user_r10));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 22);\n    i0.ɵɵtext(2, \"cancel\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction DashboardContentComponent_app_project_frame_2_div_22_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n\n  if (rf & 2) {\n    const user_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", user_r10.picture, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction DashboardContentComponent_app_project_frame_2_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DashboardContentComponent_app_project_frame_2_div_22_button_1_Template, 3, 0, \"button\", 19);\n    i0.ɵɵtemplate(2, DashboardContentComponent_app_project_frame_2_div_22_img_2_Template, 1, 1, \"img\", 20);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r10 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.permission(ctx_r4.project, \"configure\") && ctx_r4.project.owner.id != user_r10.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r10.picture);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", user_r10.displayName || user_r10.first_name + \" \" + user_r10.last_name, \" \");\n  }\n}\n\nconst _c0 = function (a2) {\n  return [\"/\", \"projects\", a2, \"execution\"];\n};\n\nfunction DashboardContentComponent_app_project_frame_2_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"a\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, ctx_r5.project.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r5.project.currentSprint.id, \" - \", ctx_r5.project.currentSprint.title, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Goal: \", ctx_r5.project.currentSprint.goal, \"\");\n  }\n}\n\nfunction DashboardContentComponent_app_project_frame_2_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"None\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DashboardContentComponent_app_project_frame_2_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-burndown\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"sprintId\", ctx_r7.project.currentSprint.id);\n  }\n}\n\nfunction DashboardContentComponent_app_project_frame_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-project-frame\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"mat-card\", 5)(4, \"h2\", 6);\n    i0.ɵɵelement(5, \"mat-icon\", 7);\n    i0.ɵɵtext(6, \"Info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-card-content\");\n    i0.ɵɵelement(8, \"app-project-card\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"mat-card\", 5)(10, \"h2\", 6);\n    i0.ɵɵelement(11, \"mat-icon\", 9);\n    i0.ɵɵtext(12, \" Recent Activity \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"mat-card-content\", 10);\n    i0.ɵɵelement(14, \"sb-project-activity-list\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"mat-card\", 5)(16, \"h2\", 6)(17, \"mat-icon\", 11);\n    i0.ɵɵtext(18, \"people\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \" Team \");\n    i0.ɵɵtemplate(20, DashboardContentComponent_app_project_frame_2_button_20_Template, 3, 0, \"button\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"mat-card-content\", 10);\n    i0.ɵɵtemplate(22, DashboardContentComponent_app_project_frame_2_div_22_Template, 4, 3, \"div\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"div\", 4)(24, \"mat-card\", 5)(25, \"h2\", 6)(26, \"mat-icon\", 14);\n    i0.ɵɵtext(27, \"directions_run\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \" Current Sprint \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"mat-card-content\");\n    i0.ɵɵtemplate(30, DashboardContentComponent_app_project_frame_2_div_30_Template, 5, 6, \"div\", 15);\n    i0.ɵɵtemplate(31, DashboardContentComponent_app_project_frame_2_div_31_Template, 2, 0, \"div\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"mat-card\", 5)(33, \"h2\", 6);\n    i0.ɵɵelement(34, \"mat-icon\", 17);\n    i0.ɵɵtext(35, \" Burndown \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"mat-card-content\");\n    i0.ɵɵtemplate(37, DashboardContentComponent_app_project_frame_2_div_37_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"project\", ctx_r2.project)(\"showTeamButton\", false);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"project\", ctx_r2.project);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"project\", ctx_r2.project);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.permission(ctx_r2.project, \"configure\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.project.team);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.project.currentSprint);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.project.currentSprint);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.project.currentSprint);\n  }\n}\n\nexport let DashboardContentComponent = /*#__PURE__*/(() => {\n  class DashboardContentComponent extends Base {\n    constructor(dialog, snackBar, projectService) {\n      super();\n      this.dialog = dialog;\n      this.snackBar = snackBar;\n      this.projectService = projectService;\n    }\n\n    ngOnInit() {}\n\n    addMember() {\n      const dialogRef = this.dialog.open(InputDialogComponent, {\n        maxWidth: '400px',\n        data: {\n          title: \"Add Project Member\",\n          message: 'Enter member email:'\n        }\n      });\n      dialogRef.afterClosed().subscribe(dialogResult => {\n        if (dialogResult) {\n          this.doAddMember(dialogResult);\n        }\n      });\n    }\n\n    doAddMember(userEmail) {\n      callWithSnackBar(this.snackBar, this.projectService.addMember(this.project, userEmail), ['Adding member...', 'Member added', 'Error adding member']);\n    }\n\n    removeMember(user) {\n      const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n        maxWidth: \"400px\",\n        data: {\n          title: \"Are you sure?\",\n          message: `You are about to remove user ${user.displayName} from this project.`\n        }\n      }); // listen to response\n\n      dialogRef.afterClosed().subscribe(dialogResult => {\n        if (dialogResult) {\n          callWithSnackBar(this.snackBar, this.projectService.removeMember(this.project.id, user.id), [\"Removing team member...\", \"Team member removed\", \"Error removing team member\"]);\n          dialogRef.close(false);\n        }\n      });\n    }\n\n  }\n\n  DashboardContentComponent.ɵfac = function DashboardContentComponent_Factory(t) {\n    return new (t || DashboardContentComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.ProjectService));\n  };\n\n  DashboardContentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DashboardContentComponent,\n    selectors: [[\"sb-dashboard-content\"]],\n    inputs: {\n      project: \"project\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 3,\n    vars: 2,\n    consts: [[\"progressSpinner\", \"\"], [3, \"project\", \"showTeamButton\", 4, \"ngIf\", \"ngIfElse\"], [3, \"project\", \"showTeamButton\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"project-info-card\"], [1, \"banner-text\"], [\"fontSet\", \"fas\", \"fontIcon\", \"fa-info-circle\", 1, \"mr-2\", \"sb-icon\"], [3, \"project\"], [\"fontSet\", \"fas\", \"fontIcon\", \"fa-heartbeat\", 1, \"sb-icon\"], [1, \"base-text\"], [1, \"sb-icon\", 2, \"position\", \"relative\", \"top\", \"3px\"], [\"class\", \"icon-button\", \"style\", \"position: relative; top: -4px\", \"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"Add Member\", 3, \"click\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"sb-icon\"], [4, \"ngIf\"], [\"class\", \"base-text\", 4, \"ngIf\"], [\"fontSet\", \"fas\", \"fontIcon\", \"fa-burn\", 1, \"sb-icon\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"Add Member\", 1, \"icon-button\", 2, \"position\", \"relative\", \"top\", \"-4px\", 3, \"click\"], [\"style\", \"position: relative; top: -4px\", \"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"Remove Member\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"user-picture\", \"alt\", \"user\", 3, \"src\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"Remove Member\", 2, \"position\", \"relative\", \"top\", \"-4px\", 3, \"click\"], [1, \"sb-icon-warn\"], [\"alt\", \"user\", 1, \"user-picture\", 3, \"src\"], [3, \"routerLink\"], [3, \"sprintId\"]],\n    template: function DashboardContentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DashboardContentComponent_ng_template_0_Template, 1, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(2, DashboardContentComponent_app_project_frame_2_Template, 38, 9, \"app-project-frame\", 1);\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(1);\n\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.project)(\"ngIfElse\", _r0);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.RouterLinkWithHref, i6.MatCard, i6.MatCardContent, i7.MatIcon, i8.MatButton, i9.MatTooltip, i10.MatSpinner, i11.ProjectCardComponent, i12.BurndownComponent, i13.ProjectFrameComponent, i14.ProjectActivityListComponent],\n    styles: [\".project-info-card[_ngcontent-%COMP%]{margin-top:6px;background-color:var(--background);color:var(--on-background);box-shadow:none;border-radius:1px}.hide[_ngcontent-%COMP%]{opacity:0}\"]\n  });\n  return DashboardContentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}