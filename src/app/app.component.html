
<app-top-bar class="no-print" error="{{error}}" syncServiceStatus="{{dataService.status | async}}"></app-top-bar>

<div class="app-container mat-app-background">

  <div *ngIf="dataService.users" class="active-users">
  	Active users:
    <div *ngFor="let user of dataService.users">
       	<img [src]="user.picture"
             [alt]="user.displayName || (user.first_name + ' ' + user.last_name)"
             [matTooltip]="user.displayName || (user.first_name + ' ' + user.last_name)"
             class="nav-user-profile user-picture mb-1"
             style="width: 32px;"/>
    </div>
  </div>
		<div class="main-content-container container" *ngIf="(loginService.status | async) == 'logged_in'">
		  <div>
		  	<div class="row align-items-center">
			  <span class="news-button" #newsTrigger (click)="showNewsFeed()" [matBadge]="(news$ | async)?.unseen_count" [matBadgeHidden]="(news$ | async)?.unseen_count == 0">
				<mat-icon class="material-icons-outlined">feed</mat-icon>
			  </span> 
			  <app-topnav class="col-11 no-print"></app-topnav>
			</div>

			  <!-- <app-breadcrumb class="mt-2"></app-breadcrumb> -->
			  <div *ngIf="(dataService.isConnected | async)">
				<router-outlet ></router-outlet>
			  </div>
		  </div>
		</div>


</div>


 

<ng-template #newsFeed>
  <sb-news-feed [news]="(news$ | async)?.news_items" (shouldClose)="closeNewsFeed()"></sb-news-feed>
</ng-template>
